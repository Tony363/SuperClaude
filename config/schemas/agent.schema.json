{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://superclaude.dev/schemas/agent.schema.json",
  "title": "SuperClaude Agent Schema",
  "description": "Schema for validating SuperClaude agent frontmatter definitions",
  "type": "object",
  "required": ["name", "description", "tier"],
  "properties": {
    "name": {
      "type": "string",
      "description": "Unique identifier for the agent (lowercase, alphanumeric with hyphens)",
      "pattern": "^[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]$",
      "minLength": 1,
      "maxLength": 50,
      "examples": ["python-expert", "security-engineer", "root-cause-analyst"]
    },
    "description": {
      "type": "string",
      "description": "Brief description of the agent's expertise and purpose",
      "minLength": 10,
      "maxLength": 200,
      "examples": ["Deliver production-ready Python code with modern patterns and best practices."]
    },
    "tier": {
      "type": "string",
      "description": "Agent tier determining selection priority and behavior",
      "enum": ["core", "trait", "extension"],
      "enumDescriptions": {
        "core": "Primary agents for common tasks (highest priority)",
        "trait": "Composable behavior modifiers (not directly selectable)",
        "extension": "Domain-specific specialists (lower priority than core)"
      }
    },
    "category": {
      "type": "string",
      "description": "Functional category for organization and matching",
      "examples": ["language", "debugging", "security", "documentation", "architecture"]
    },
    "triggers": {
      "type": "array",
      "description": "Keywords that trigger this agent's selection",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "minItems": 1,
      "uniqueItems": true,
      "examples": [["python", "django", "fastapi", "pytest"]]
    },
    "tools": {
      "type": "array",
      "description": "Claude Code tools this agent is expected to use",
      "items": {
        "type": "string",
        "enum": [
          "Read",
          "Write",
          "Edit",
          "Bash",
          "Glob",
          "Grep",
          "Task",
          "WebFetch",
          "WebSearch",
          "NotebookEdit",
          "AskUserQuestion",
          "TodoWrite",
          "KillShell",
          "TaskOutput",
          "LSP",
          "Skill",
          "EnterPlanMode",
          "ExitPlanMode"
        ]
      },
      "uniqueItems": true,
      "examples": [["Read", "Write", "Edit", "Bash", "Grep", "Glob"]]
    },
    "priority": {
      "type": "integer",
      "description": "Selection priority (1=highest, 3=lowest). Derived from tier if not specified.",
      "minimum": 1,
      "maximum": 3,
      "default": 2
    },
    "traits": {
      "type": "array",
      "description": "Default traits to apply when this agent is selected",
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z0-9-]*[a-z0-9]$"
      },
      "uniqueItems": true,
      "examples": [["security-first", "test-driven"]]
    }
  },
  "allOf": [
    {
      "if": {
        "properties": { "tier": { "const": "trait" } }
      },
      "then": {
        "not": {
          "required": ["triggers"]
        },
        "properties": {
          "triggers": {
            "description": "Traits should not have triggers (they are composable modifiers)"
          },
          "priority": {
            "description": "Traits should not have priority (they don't participate in selection)"
          }
        }
      }
    },
    {
      "if": {
        "properties": { "tier": { "enum": ["core", "extension"] } }
      },
      "then": {
        "required": ["triggers"],
        "properties": {
          "triggers": {
            "minItems": 1
          }
        }
      }
    }
  ],
  "examples": [
    {
      "name": "python-expert",
      "description": "Deliver production-ready Python code with modern patterns and best practices.",
      "tier": "core",
      "category": "language",
      "triggers": ["python", "py", "pip", "django", "flask", "fastapi", "pytest"],
      "tools": ["Read", "Write", "Edit", "Bash", "Grep", "Glob", "LSP"]
    },
    {
      "name": "security-first",
      "description": "Composable trait that adds security-focused considerations to any agent's output.",
      "tier": "trait",
      "category": "modifier"
    },
    {
      "name": "typescript-expert",
      "description": "Deliver production-ready TypeScript and Node.js code with strong typing and modern patterns.",
      "tier": "extension",
      "category": "language",
      "triggers": ["typescript", "ts", "node", "nodejs", "npm", "yarn"],
      "tools": ["Read", "Write", "Edit", "Bash", "Grep", "Glob", "LSP"]
    }
  ]
}
